<!DOCTYPE html>
<html
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:th="http://www.thymeleaf.org"
        lang="en"
>
<head th:replace="fragments/ui/general :: headerAttr('Web Genius | Profile')"></head>
<body class="bg-slate-200 relative">
    <div th:replace="fragments/ui/general :: header"></div>

    <div class="max-w-[800px] mx-auto my-0 py-6 flex flex-col items-center justify-center">
        <div class="w-[400px] bg-white rounded shadow p-4 flex flex-col items-center gap-6">
            <img th:src="@{/img/{picture}(picture=${user.picture})}"
                class="w-[150px] h-[150px] rounded-full shadow"
            >
            <h1 th:text="${user.pseudo}" class="text-center text-xl text-slate-900 font-semibold">Pseudo</h1>
            <h2 th:text="${user.email}" class="text-center text-lg text-slate-700 font-semibold">Email</h2>
            <div class="flex items-center justify-center gap-2">
                <span>Compte activé ?</span>
                <strong th:if="${user.verified}" class="font-bold text-green-600">OUI</strong>
                <strong th:if="${not user.verified}" class="font-bold text-orange-600">NON</strong>
            </div>
            <div class="text-center text-slate-600 flex items-center justify-center gap-2">
                <strong th:text="${formatedDate}">AT</strong>
            </div>
            <div class="flex items-center justify-center gap-3 pb-4">
                <div th:each="role : ${user.roles}">
                    <strong th:text="${role}"
                            class="p-2 rounded border-2 border-slate-500 text-slate-500 font-semibold"
                    >
                        Role
                    </strong>
                </div>
            </div>
        </div>

        <form
            class="w-full flex flex-col gap-6 my-8"
            method="post"
            role="form"
            th:action="@{/account/profile/edit}"
            th:object="${profile}"
        >
            <div class="my-3 min-w-[320px]">
                <div class="shadow rouded bg-white px-4 py-2 rounded">
                    <div class="bg-slate-50 w-max text-slate-600 p-1.5 text-sm mb-1 rounded-md flex items-center gap-1 text-start">
                        <label class="cursor-pointer" th:for="pseudo">
                            Pseudo
                        </label>
                        <strong class="text-red-400">*</strong>
                    </div>
                    <input
                        class="w-full border-none text-slate-700 outline-none bg-inherit"
                        th:id="pseudo"
                        th:name="pseudo"
                        th:value="${user.pseudo}"
                        type="text"
                    >
                </div>
            </div>

            <div class="my-3 min-w-[320px]">
                <div class="shadow rouded bg-white px-4 py-2 rounded">
                    <div class="bg-slate-50 w-max text-slate-600 p-1.5 text-sm mb-1 rounded-md flex items-center gap-1 text-start">
                        <label class="cursor-pointer" th:for="bio">
                            Ajouter une bio
                        </label>
                        <strong class="text-red-400">*</strong>
                    </div>
                    <textarea
                        class="w-full min-h-[150px] border-none text-slate-700 outline-none bg-inherit"
                        th:id="bio"
                        th:name="bio"
                        th:value="${user.bio}"
                    ></textarea>
                </div>
            </div>

            <div th:if="${error}">
                <div th:replace="fragments/form/alert :: alert-danger(message=${error})"
                ></div>
            </div>

            <div th:replace="fragments/form/submit :: button(text='Mettre à jour')"></div>
        </form>
    </div>

    <div th:replace="fragments/ui/general :: footer"></div>
</body>
</html>